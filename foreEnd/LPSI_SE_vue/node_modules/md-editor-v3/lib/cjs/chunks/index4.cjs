"use strict";var C=Object.defineProperty;var r=(o,t,s)=>t in o?C(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s;var i=(o,t,s)=>(r(o,typeof t!="symbol"?t+"":t,s),s);class a{constructor(){i(this,"pools",{})}remove(t,s,n){const e=this.pools[t]&&this.pools[t][s];e&&(this.pools[t][s]=e.filter(E=>E!==n))}clear(t){this.pools[t]={}}on(t,s){return this.pools[t]||(this.pools[t]={}),this.pools[t][s.name]||(this.pools[t][s.name]=[]),this.pools[t][s.name].push(s.callback),this.pools[t][s.name].includes(s.callback)}emit(t,s,...n){this.pools[t]||(this.pools[t]={});const e=this.pools[t][s];e&&e.forEach(E=>{try{E(...n)}catch(c){console.error(`${s} monitor event exception！`,c)}})}}const A=new a,_="onSave",p="changeCatalogVisible",u="changeFullscreen",L="pageFullscreenChanged",R="fullscreenChanged",h="previewChanged",g="htmlPreviewChanged",N="catalogVisibleChanged",G="textareaFocus",H="buildFinished",S="errorCatcher",T="replace",I="uploadImage",d="openModals",D="ctrlZ",O="ctrlShiftZ",F="catalogChanged",b="pushCatalog",P=(o,t="image.png")=>{const s=o.split(","),n=s[0].match(/:(.*?);/);if(n){const l=n[1],e=atob(s[1]);let E=e.length;const c=new Uint8Array(E);for(;E--;)c[E]=e.charCodeAt(E);return new File([c],t,{type:l})}return null},U=o=>{if(!o)return o;const t=o.split(`
`),s=['<span rn-wrapper aria-hidden="true">'];return t.forEach(()=>{s.push("<span></span>")}),s.push("</span>"),`<span class="code-block">${o}</span>${s.join("")}`},f=(o,t)=>{if(!o||!t)return 0;const s=o==null?void 0:o.getBoundingClientRect();if(t===document.documentElement)return s.top-t.clientTop;const n=t==null?void 0:t.getBoundingClientRect();return s.top-n.top},m=()=>`${Date.now().toString(36)}${Math.random().toString(36).substring(2)}`;exports.BUILD_FINISHED=H;exports.CATALOG_CHANGED=F;exports.CATALOG_VISIBLE_CHANGED=N;exports.CHANGE_CATALOG_VISIBLE=p;exports.CHANGE_FULL_SCREEN=u;exports.CTRL_SHIFT_Z=O;exports.CTRL_Z=D;exports.ERROR_CATCHER=S;exports.FULL_SCREEN_CHANGED=R;exports.HTML_PREVIEW_CHANGED=g;exports.ON_SAVE=_;exports.OPEN_MODALS=d;exports.PAGE_FULL_SCREEN_CHANGED=L;exports.PREVIEW_CHANGED=h;exports.PUSH_CATALOG=b;exports.REPLACE=T;exports.TEXTAREA_FOCUS=G;exports.UPLOAD_IMAGE=I;exports.base642File=P;exports.bus=A;exports.generateCodeRowNumber=U;exports.getRelativeTop=f;exports.uuid=m;
