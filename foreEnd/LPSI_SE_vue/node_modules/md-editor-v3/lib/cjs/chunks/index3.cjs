"use strict";const e=require("vue"),n=require("./config.cjs"),v=require("./vue-tsx.cjs"),p=require("./dom.cjs"),C=e.defineComponent({props:{name:{type:String,default:""}},setup(t){return()=>n.configOption.iconfontType==="svg"?e.createVNode("svg",{class:`${n.prefix}-icon`,"aria-hidden":"true"},[e.createVNode("use",{"xlink:href":`#${n.prefix}-icon-${t.name}`},null)]):e.createVNode("i",{class:`${n.prefix}-iconfont ${n.prefix}-icon-${t.name}`},null)}}),h=e.defineComponent({props:{name:{type:String,default:""}},setup(t){const u=e.inject("customIcon");return()=>{const l=u.value[t.name];return typeof l=="object"?typeof l.component=="object"?e.h(l.component,l.props):e.createVNode("span",{innerHTML:l.component},null):e.createVNode(C,{name:t.name},null)}}}),P={title:{type:String,default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:"auto"},onClose:{type:Function},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:()=>{}}},r=e.defineComponent({name:"MdModal",props:P,emits:["onClose"],setup(t,u){const l=e.ref(t.visible),a=e.ref([`${n.prefix}-modal`]),f=e.ref(),m=e.ref();let d=()=>{};const o=e.reactive({initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),y=e.computed(()=>t.isFullscreen?{width:"100%",height:"100%"}:{width:t.width,height:t.height});return e.onMounted(()=>{d=p.keyMove(m.value,(s,i)=>{o.initPos.left=s+"px",o.initPos.top=i+"px"})}),e.onBeforeUnmount(()=>{d()}),e.watch(()=>t.isFullscreen,s=>{s?d():d=p.keyMove(m.value,(i,c)=>{o.initPos.left=i+"px",o.initPos.top=c+"px"})}),e.watch(()=>t.visible,s=>{s?(a.value.push("zoom-in"),l.value=s,e.nextTick(()=>{const i=f.value.offsetWidth/2,c=f.value.offsetHeight/2,g=document.documentElement.clientWidth/2,x=document.documentElement.clientHeight/2;o.initPos.left=g-i+"px",o.initPos.top=x-c+"px"}),setTimeout(()=>{a.value=a.value.filter(i=>i!=="zoom-in")},140)):(a.value.push("zoom-out"),setTimeout(()=>{a.value=a.value.filter(i=>i!=="zoom-out"),l.value=s},130))}),()=>{const s=v.getSlot({ctx:u}),i=v.getSlot({props:t,ctx:u},"title");return e.createVNode("div",{style:{display:l.value?"block":"none"}},[e.createVNode("div",{class:`${n.prefix}-modal-mask`,onClick:()=>{t.onClose?t.onClose():u.emit("onClose")}},null),e.createVNode("div",{class:a.value,style:{...o.initPos,...y.value},ref:f},[e.createVNode("div",{class:`${n.prefix}-modal-header`,ref:m},[i||""]),e.createVNode("div",{class:`${n.prefix}-modal-body`},[s]),e.createVNode("div",{class:`${n.prefix}-modal-func`},[t.showAdjust&&e.createVNode("div",{class:`${n.prefix}-modal-adjust`,onClick:c=>{c.stopPropagation(),t.isFullscreen?o.initPos=o.historyPos:(o.historyPos=o.initPos,o.initPos={left:"0",top:"0"}),t.onAdjust(!t.isFullscreen)}},[e.createVNode(h,{name:t.isFullscreen?"suoxiao":"fangda"},null)]),e.createVNode("div",{class:`${n.prefix}-modal-close`,onClick:c=>{c.stopPropagation(),t.onClose?t.onClose():u.emit("onClose")}},[e.createVNode(h,{name:"close"},null)])])])])}}});r.install=t=>(t.component(r.name,r),t);exports.Icon=h;exports.MdModal=r;
