"use strict";const s=require("vue"),d=require("./config.cjs"),y=require("./index4.cjs"),C=require("./dom.cjs"),z=require("medium-zoom"),O=require("@vavt/util"),K=require("copy-to-clipboard"),W=require("markdown-it"),Z=require("markdown-it-image-figures"),J=require("markdown-it-task-lists"),X=require("lru-cache"),P="onSave",T="changeCatalogVisible",L="changeFullscreen",_="pageFullscreenChanged",H="fullscreenChanged",M="previewChanged",F="htmlPreviewChanged",R="catalogVisibleChanged",N="textareaFocus",Q=(e,o)=>{const i=s.inject("editorId"),n=O.debounce(()=>{const t=document.querySelectorAll(`#${i}-preview img`);t.length!==0&&z(t,{background:"#00000073"})});s.onMounted(n),s.watch([o,s.toRef(e.setting,"preview")],n)},Y=Q,ee=(e,o)=>{const i=s.inject("editorId"),n=s.inject("usedLanguageText"),t=()=>{document.querySelectorAll(`#${i}-preview pre`).forEach(c=>{var p,h;let m=-1;(p=c.querySelector(".copy-button"))==null||p.remove();const u=((h=n.value.copyCode)==null?void 0:h.text)||"复制代码",r=document.createElement("span");r.setAttribute("class","copy-button"),r.dataset.tips=u,r.innerHTML=`<svg class="${d.prefix}-icon" aria-hidden="true"><use xlink:href="#${d.prefix}-icon-copy"></use></svg>`,r.addEventListener("click",()=>{var k,b;clearTimeout(m);const w=c.querySelector("code").innerText,f=K(e.formatCopiedText(w)),v=((k=n.value.copyCode)==null?void 0:k.successTips)||"已复制！",g=((b=n.value.copyCode)==null?void 0:b.failTips)||"已复制！";r.dataset.tips=f?v:g,m=window.setTimeout(()=>{r.dataset.tips=u},1500)}),c.appendChild(r)})},l=()=>{s.nextTick(t)},a=c=>{c&&s.nextTick(t)};s.watch(()=>o.value,l),s.watch(()=>e.setting.preview,a),s.watch(()=>e.setting.htmlPreview,a),s.watch(()=>n.value,t),s.onMounted(t)},te=ee,ne=e=>{var l;const o=(l=d.configOption.editorExtensions)==null?void 0:l.highlight,i=o==null?void 0:o.instance,n=s.inject("highlight"),t=s.shallowRef(i);return s.onMounted(()=>{if(!e.noHighlight&&!t.value){const a=document.createElement("script");a.src=n.value.js,a.onload=()=>{t.value=window.hljs},a.id=`${d.prefix}-hljs`,C.appendHandler(a,"hljs");const c=document.createElement("link");c.rel="stylesheet",c.href=n.value.css,c.id=`${d.prefix}-hlCss`,C.appendHandler(c)}}),s.watch(()=>n.value.css,a=>{C.updateHandler(`${d.prefix}-hlCss`,"href",a)}),t},re=ne,oe=e=>{const o=s.inject("theme"),{editorExtensions:i}=d.configOption,n=i==null?void 0:i.mermaid,t=s.shallowRef(n==null?void 0:n.instance),l=s.shallowRef(-1),a=new X({max:1e3,ttl:6e5}),c=()=>{const u=t.value;!e.noMermaid&&u&&(u.initialize({startOnLoad:!1,theme:o.value==="dark"?"dark":"default"}),l.value=l.value+1)};return s.watch(()=>o.value,()=>{a.clear(),c()}),s.onMounted(()=>{if(!e.noMermaid&&!(n!=null&&n.instance)){const u=(n==null?void 0:n.js)||d.mermaidUrl;if(/\.mjs/.test(u))import(u).then(r=>{t.value=r.default,c()});else{const r=document.createElement("script");r.id=`${d.prefix}-mermaid`,r.src=u,r.onload=()=>{t.value=window.mermaid,c()},C.appendHandler(r,"mermaid")}}}),{mermaidRef:t,reRenderRef:l,replaceMermaid:()=>{s.nextTick(()=>{if(!e.noMermaid&&t.value){const u=document.querySelectorAll(`div.${d.prefix}-mermaid`),r=document.createElement("div");r.style.width=document.body.offsetWidth+"px",r.style.height=document.body.offsetHeight+"px",r.style.position="fixed",r.style.zIndex="-10000",r.style.top="-10000";let p=u.length;p>0&&document.body.appendChild(r),u.forEach(async h=>{let w=a.get(h.innerText);if(!w){const v=y.uuid(),g=t.value.renderAsync||t.value.render;let k="";try{k=await g(v,h.innerText,r)}catch{}w=typeof k=="string"?k:k.svg,a.set(h.innerText,w)}const f=document.createElement("p");f.className=`${d.prefix}-mermaid`,f.setAttribute("data-processed",""),f.innerHTML=w,h.dataset.line!==void 0&&(f.dataset.line=h.dataset.line),h.replaceWith(f),--p===0&&r.remove()})}})}}},ie=oe,le=e=>{var t;const o=(t=d.configOption.editorExtensions)==null?void 0:t.katex,i=o==null?void 0:o.instance,n=s.shallowRef(i);return s.onMounted(()=>{if(!e.noKatex&&!n.value){const l=document.createElement("script");l.src=(o==null?void 0:o.js)||d.katexUrl.js,l.onload=()=>{n.value=window.katex},l.id=`${d.prefix}-katex`;const a=document.createElement("link");a.rel="stylesheet",a.href=(o==null?void 0:o.css)||d.katexUrl.css,a.id=`${d.prefix}-katexCss`,C.appendHandler(l,"katex"),C.appendHandler(a)}}),n},ae=le,ce=(e,o)=>{const i=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(n,t,l,a,c)=>{const m=n[t],u=m.content.trim();if(m.info==="mermaid"){let r;return n[t].map&&n[t].level===0&&(r=n[t].map[0],n[t].attrSet("data-line",String(r))),`<div class="${d.prefix}-mermaid" ${r!==void 0?"data-line="+r:""} data-mermaid-theme=${o.themeRef.value}>${u}</div>`}return i(n,t,l,a,c)}},se=ce,A=(e,o)=>{let i=!0,n=!0;const t=e.posMax,l=o>0?e.src.charCodeAt(o-1):-1,a=o+1<=t?e.src.charCodeAt(o+1):-1;return(l===32||l===9||a>=48&&a<=57)&&(n=!1),(a===32||a===9)&&(i=!1),{can_open:i,can_close:n}},ue=(e,o)=>{let i,n,t,l;if(e.src[e.pos]!=="$")return!1;if(t=A(e,e.pos),!t.can_open)return o||(e.pending+="$"),e.pos+=1,!0;const a=e.pos+1;for(i=a;(i=e.src.indexOf("$",i))!==-1;){for(l=i-1;e.src[l]==="\\";)l-=1;if((i-l)%2==1)break;i+=1}return i===-1?(o||(e.pending+="$"),e.pos=a,!0):i-a===0?(o||(e.pending+="$$"),e.pos=a+1,!0):(t=A(e,i),t.can_close?(o||(n=e.push("math_inline","math",0),n.markup="$",n.content=e.src.slice(a,i)),e.pos=i+1,!0):(o||(e.pending+="$"),e.pos=a,!0))},de=(e,o,i,n)=>{let t,l,a,c,m=!1,u=e.bMarks[o]+e.tShift[o],r=e.eMarks[o];if(u+2>r||e.src.slice(u,u+2)!=="$$")return!1;if(u+=2,t=e.src.slice(u,r),n)return!0;for(t.trim().slice(-2)==="$$"&&(t=t.trim().slice(0,-2),m=!0),a=o;!m&&(a++,!(a>=i||(u=e.bMarks[a]+e.tShift[a],r=e.eMarks[a],u<r&&e.tShift[a]<e.blkIndent)));)e.src.slice(u,r).trim().slice(-2)==="$$"&&(c=e.src.slice(0,r).lastIndexOf("$$"),l=e.src.slice(u,c),m=!0);e.line=a+1;const p=e.push("math_block","math",0);return p.block=!0,p.content=(t&&t.trim()?t+`
`:"")+e.getLines(o+1,a,e.tShift[o],!0)+(l&&l.trim()?l:""),p.map=[o,e.line],p.markup="$$",!0},me=(e,o)=>{const i=t=>{if(o.katexRef.value){const l=o.katexRef.value.renderToString(t,{throwOnError:!1});return`<span class="${d.prefix}-katex-inline" data-processed>${l}</span>`}else return`<span class="${d.prefix}-katex-inline">${t}</span>`},n=(t,l)=>{if(o.katexRef.value){const a=o.katexRef.value.renderToString(t,{throwOnError:!1,displayMode:!0});return`<p class="${d.prefix}-katex-block" data-line=${l} data-processed>${a}</p>`}else return`<p class="${d.prefix}-katex-block" data-line=${l}>${t}</p>`};e.inline.ruler.after("escape","math_inline",ue),e.block.ruler.after("blockquote","math_block",de,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=(t,l)=>i(t[l].content),e.renderer.rules.math_block=(t,l)=>n(t[l].content,t[l].map[0])+`
`},fe=me,pe=(e,o)=>{o=o||{};const i=3,n=o.marker||"!",t=n.charCodeAt(0),l=n.length;let a="",c="";const m=(r,p,h,w,f)=>{const v=r[p];return v.type==="admonition_open"?(r[p].attrPush(["class",`${d.prefix}-admonition ${d.prefix}-admonition-${v.info}`]),r[p].attrSet("data-line",String(r[p].map[0]))):v.type==="admonition_title_open"&&r[p].attrPush(["class",`${d.prefix}-admonition-title`]),f.renderToken(r,p,h)},u=r=>{const p=r.trim().split(" ",2);c="",a=p[0],p.length>1&&(c=r.substring(a.length+2)),(c===""||!c)&&(c=a)};e.block.ruler.before("code","admonition",(r,p,h,w)=>{let f,v,g,k=!1,b=r.bMarks[p]+r.tShift[p],$=r.eMarks[p];if(t!==r.src.charCodeAt(b))return!1;for(f=b+1;f<=$&&n[(f-b)%l]===r.src[f];f++);const x=Math.floor((f-b)/l);if(x!==i)return!1;f-=(f-b)%l;const E=r.src.slice(b,f),S=r.src.slice(f,$);if(u(S),w)return!0;for(v=p;v++,!(v>=h||(b=r.bMarks[v]+r.tShift[v],$=r.eMarks[v],b<$&&r.sCount[v]<r.blkIndent));)if(t===r.src.charCodeAt(b)&&!(r.sCount[v]-r.blkIndent>=4)){for(f=b+1;f<=$&&n[(f-b)%l]===r.src[f];f++);if(!(Math.floor((f-b)/l)<x)&&(f-=(f-b)%l,f=r.skipSpaces(f),!(f<$))){k=!0;break}}const q=r.parentType,D=r.lineMax;return r.parentType="root",r.lineMax=v,g=r.push("admonition_open","div",1),g.markup=E,g.block=!0,g.info=a,g.map=[p,v],g=r.push("admonition_title_open","p",1),g.markup=E+" "+a,g.map=[p,v],g=r.push("inline","",0),g.content=c,g.map=[p,r.line-1],g.children=[],g=r.push("admonition_title_close","p",-1),g.markup=E+" "+a,r.md.block.tokenize(r,p+1,v),g=r.push("admonition_close","div",-1),g.markup=r.src.slice(b,f),g.block=!0,r.parentType=q,r.lineMax=D,r.line=v+(k?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.admonition_open=m,e.renderer.rules.admonition_title_open=m,e.renderer.rules.admonition_title_close=m,e.renderer.rules.admonition_close=m},he=pe,ge=(e,o)=>{e.renderer.rules.heading_open=(i,n)=>{const t=i[n],l=i[n+1].content,a=t.markup.length;return o.headsRef.value.push({text:l,level:a}),t.map&&t.level===0&&(t.attrSet("data-line",String(t.map[0])),t.attrSet("id",o.mdHeadingId(l,a,o.headsRef.value.length))),e.renderer.renderToken(i,n,o)},e.renderer.rules.heading_close=(i,n,t,l,a)=>a.renderToken(i,n,t)},ve=ge,be=(e,o)=>{const i=e.renderer.rules.fence,n=e.utils.unescapeAll,t=/\[(\w*)(?::([\w ]*))?\]/;function l(u){return u.info?n(u.info).trim():""}function a(u){const r=l(u),[p=null,h=""]=(t.exec(r)||[]).slice(1);return[p,h]}function c(u){const r=l(u);return r?r.split(/(\s+)/g)[0]:""}const m=(u,r,p,h,w)=>{if(u[r].hidden)return"";const[f,v]=a(u[r]);if(f===null)return i(u,r,p,h,w);let g,k,b,$,x="",E="";for(let S=r;S<u.length&&(g=u[S],[k,b]=a(g),k===f);S++)g.info=g.info.replace(t,""),g.hidden=!0,$=S-r>0?"":" checked",x+=`<li><input type="radio" name="label-group-${o.editorId}-${r}"${$}><label for="group-${o.editorId}-${r}-tab-${S-r}" onclick="this.previousElementSibling.click()">${b||c(g)}</label></li>
`,E+=`<input type="radio" id="group-${o.editorId}-${r}-tab-${S-r}" name="group-${o.editorId}-${r}"${$}>
`+i(u,S,p,h,w);return`<div class="code-tabs">
<ul>
`+x+`</ul>
`+E+"</div>"};e.renderer.rules.fence=m},ye=be,we=e=>{["paragraph_open","table_open","ordered_list_open","bullet_list_open","blockquote_open","hr","html_block","fence"].forEach(o=>{const i=e.renderer.rules[o];i?e.renderer.rules[o]=(n,t,l,a,c)=>{let m;const u=i(n,t,l,a,c);return n[t].map&&n[t].level===0?(m=n[t].map[0],u.replace(/^(<[^>]*)/,`$1 data-line="${m}"`)):u}:e.renderer.rules[o]=(n,t,l,a,c)=>{let m;return n[t].map&&n[t].level===0&&(m=n[t].map[0],n[t].attrSet("data-line",String(m))),c.renderToken(n,t,l)}})},ke=(e,o)=>{const{editorConfig:i,markdownItConfig:n}=d.configOption,t=s.inject("editorId"),l=s.inject("showCodeRowNumber"),a=s.inject("theme"),c=s.ref([]),m=re(e),u=ae(e),{reRenderRef:r,replaceMermaid:p}=ie(e),h=W({html:!0,breaks:!0});n(h),h.use(fe,{katexRef:u}),h.use(Z,{figcaption:!0}),h.use(he),h.use(J),h.use(ve,{mdHeadingId:e.mdHeadingId,headsRef:c}),h.use(ye,{editorId:t}),e.noMermaid||h.use(se,{themeRef:a}),h.set({highlight:(k,b)=>{let $;!e.noHighlight&&m.value?m.value.getLanguage(b)?$=m.value.highlight(k,{language:b,ignoreIllegals:!0}).value:$=m.value.highlightAuto(k).value:$=h.utils.escapeHtml(k);const x=l?y.generateCodeRowNumber($.trim()):`<span class="code-block">${$.trim()}</span>`;return`<pre><code class="language-${b}" language=${b}>${x}</code></pre>`}}),we(h);const w=s.ref(e.sanitize(h.render(e.modelValue))),f=()=>{y.bus.emit(t,"buildFinished",w.value),e.onHtmlChanged(w.value),e.onGetCatalog(c.value),y.bus.emit(t,"catalogChanged",c.value),p()};s.onMounted(f);const v=O.debounce(async()=>{c.value=[],w.value=e.sanitize(h.render(e.modelValue)),f()},(i==null?void 0:i.renderDelay)!==void 0?i==null?void 0:i.renderDelay:o?0:500),g=s.computed(()=>(e.noKatex||u.value)&&(e.noHighlight||m.value));return s.watch([s.toRef(e,"modelValue"),g,r],v),s.onMounted(()=>{y.bus.on(t,{name:"pushCatalog",callback(){y.bus.emit(t,"catalogChanged",c.value)}})}),{html:w}},$e=ke,Ce={modelValue:{type:String,default:""},setting:{type:Object,default:()=>({})},onHtmlChanged:{type:Function,default:()=>{}},onGetCatalog:{type:Function,default:()=>{}},mdHeadingId:{type:Function,default:()=>""},noMermaid:{type:Boolean,default:!1},sanitize:{type:Function,default:e=>e},noKatex:{type:Boolean,default:!1},formatCopiedText:{type:Function,default:e=>e},noHighlight:{type:Boolean,default:!1},previewOnly:{type:Boolean,default:!1}},j=s.defineComponent({name:"ContentPreview",props:Ce,setup(e){const o=s.inject("editorId"),i=s.inject("previewTheme"),n=s.inject("showCodeRowNumber"),{html:t}=$e(e,e.previewOnly);return te(e,t),Y(e,t),()=>s.createVNode(s.Fragment,null,[s.createVNode("div",{id:`${o}-preview-wrapper`,class:`${d.prefix}-preview-wrapper`,"data-show":e.setting.preview,key:"content-preview-wrapper"},[s.createVNode("article",{id:`${o}-preview`,class:[`${d.prefix}-preview`,`${i==null?void 0:i.value}-theme`,n&&`${d.prefix}-scrn`],innerHTML:t.value},null)]),!e.previewOnly&&s.createVNode("div",{id:`${o}-html-wrapper`,class:`${d.prefix}-preview-wrapper`,"data-show":e.setting.htmlPreview,key:"html-preview-wrapper"},[s.createVNode("div",{class:`${d.prefix}-html`},[t.value])])])}}),xe=(e,o)=>{const{editorId:i}=e,n=s.reactive({buildFinished:!1,html:""});s.watch(()=>e.modelValue,()=>{n.buildFinished=!1}),s.onMounted(()=>{y.bus.on(i,{name:"buildFinished",callback(t){n.buildFinished=!0,n.html=t}}),y.bus.on(i,{name:P,callback(){const t=new Promise(l=>{if(n.buildFinished)l(n.html);else{const a=c=>{l(c),y.bus.remove(i,"buildFinished",a)};y.bus.on(i,{name:"buildFinished",callback:a})}});e.onSave?e.onSave(e.modelValue,t):o.emit("onSave",e.modelValue,t)}})})},V=e=>{var t,l;const{editorId:o}=e,i=(l=(t=d.configOption)==null?void 0:t.editorExtensions)==null?void 0:l.highlight;s.provide("editorId",o),s.provide("theme",s.computed(()=>e.theme)),s.provide("highlight",s.computed(()=>{const a={...d.codeCss,...i==null?void 0:i.css},c=e.codeStyleReverse&&e.codeStyleReverseList.includes(e.previewTheme)?"dark":e.theme;return{js:(i==null?void 0:i.js)||d.highlightUrl,css:a[e.codeTheme]?a[e.codeTheme][c]:d.codeCss.atom[c]}})),s.provide("showCodeRowNumber",e.showCodeRowNumber);const n=s.computed(()=>{var c,m;const a={...d.staticTextDefault,...(m=(c=d.configOption)==null?void 0:c.editorConfig)==null?void 0:m.languageUserDefined};return a[e.language]?a[e.language]:d.staticTextDefault["zh-CN"]});s.provide("usedLanguageText",n),s.provide("previewTheme",s.computed(()=>e.previewTheme))},Se=e=>{V(e),s.provide("tabWidth",e.tabWidth)},U=e=>{s.onMounted(()=>{var i;const o=document.createElement("script");o.src=((i=d.configOption.editorExtensions)==null?void 0:i.iconfont)||d.iconfontUrl,o.id=`${d.prefix}-icon`,e.noIconfont||C.appendHandler(o)})},Ee=e=>{var c,m,u,r,p,h;const{noPrettier:o,noUploadImg:i}=e,{editorExtensions:n}=d.configOption,t=o||!!((m=(c=d.configOption.editorExtensions)==null?void 0:c.prettier)!=null&&m.prettierInstance),l=o||!!((r=(u=d.configOption.editorExtensions)==null?void 0:u.prettier)!=null&&r.parserMarkdownInstance),a=i||!!((h=(p=d.configOption.editorExtensions)==null?void 0:p.cropper)!=null&&h.instance);s.onMounted(()=>{var k,b,$,x;const w=document.createElement("script"),f=document.createElement("script");w.src=((k=n==null?void 0:n.prettier)==null?void 0:k.standaloneJs)||d.prettierUrl.main,w.id=`${d.prefix}-prettier`,f.src=((b=n==null?void 0:n.prettier)==null?void 0:b.parserMarkdownJs)||d.prettierUrl.markdown,f.id=`${d.prefix}-prettierMD`;const v=document.createElement("link");v.rel="stylesheet",v.href=(($=n==null?void 0:n.cropper)==null?void 0:$.css)||d.cropperUrl.css,v.id=`${d.prefix}-cropperCss`;const g=document.createElement("script");g.src=((x=n==null?void 0:n.cropper)==null?void 0:x.js)||d.cropperUrl.js,g.id=`${d.prefix}-cropper`,a||(C.appendHandler(v),C.appendHandler(g)),t||C.appendHandler(w),l||C.appendHandler(f)}),U(e)},Ie=(e,o)=>{const{editorId:i}=e,n=s.reactive({pageFullscreen:e.pageFullscreen,fullscreen:!1,preview:e.preview,htmlPreview:e.preview?!1:e.htmlPreview}),t=(c,m)=>{n[c]=m===void 0?!n[c]:m,c==="preview"&&n.preview?n.htmlPreview=!1:c==="htmlPreview"&&n.htmlPreview&&(n.preview=!1)};let l="";const a=()=>{n.pageFullscreen||n.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=l};return s.watch(()=>[n.pageFullscreen,n.fullscreen],a),s.onMounted(()=>{y.bus.on(i,{name:"uploadImage",callback(c,m){const u=r=>{y.bus.emit(i,"replace","image",{desc:"",urls:r}),m&&m()};e.onUploadImg?e.onUploadImg(c,u):o.emit("onUploadImg",c,u)}}),l=document.body.style.overflow,a()}),[n,t]},Pe=e=>{const{editorId:o}=e,i=s.ref(!1);return s.onMounted(()=>{y.bus.on(o,{name:T,callback:t=>{t===void 0?i.value=!i.value:i.value=t}})}),s.computed(()=>!e.toolbarsExclude.includes("catalog")&&e.toolbars.includes("catalog")&&i.value)},Te=(e,o,i,n,t)=>{const{editorId:l}=e;s.watch(()=>n.pageFullscreen,c=>{y.bus.emit(l,_,c)}),s.watch(()=>n.fullscreen,c=>{y.bus.emit(l,H,c)}),s.watch(()=>n.preview,c=>{y.bus.emit(l,M,c)}),s.watch(()=>n.htmlPreview,c=>{y.bus.emit(l,F,c)}),s.watch(i,c=>{y.bus.emit(l,R,c)});const a={on(c,m){switch(c){case"pageFullscreen":{y.bus.on(l,{name:_,callback(u){m(u)}});break}case"fullscreen":{y.bus.on(l,{name:H,callback(u){m(u)}});break}case"preview":{y.bus.on(l,{name:M,callback(u){m(u)}});break}case"htmlPreview":{y.bus.on(l,{name:F,callback(u){m(u)}});break}case"catalog":{y.bus.on(l,{name:R,callback(u){m(u)}});break}}},togglePageFullscreen(c){t("pageFullscreen",c)},toggleFullscreen(c){y.bus.emit(l,L,c)},togglePreview(c){t("preview",c)},toggleHtmlPreview(c){t("htmlPreview",c)},toggleCatalog(c){y.bus.emit(l,T,c)},triggerSave(){y.bus.emit(l,P)},insert(c){y.bus.emit(l,"replace","universal",{generate:c})},focus(c){y.bus.emit(l,N,c)}};o.expose(a)},_e=e=>e,B={modelValue:{type:String,default:""},theme:{type:String,default:"light"},class:{type:String,default:""},language:{type:String,default:"zh-CN"},onHtmlChanged:{type:Function},onGetCatalog:{type:Function},editorId:{type:String,default:d.defaultEditorId},showCodeRowNumber:{type:Boolean,default:!1},previewTheme:{type:String,default:"default"},style:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:_e},sanitize:{type:Function,default:e=>e},noMermaid:{type:Boolean,default:!1},noKatex:{type:Boolean,default:!1},codeTheme:{type:String,default:"atom"},noIconfont:{type:Boolean},formatCopiedText:{type:Function,default:e=>e},codeStyleReverse:{type:Boolean,default:!0},codeStyleReverseList:{type:Array,default:["default","mk-cute"]},noHighlight:{type:Boolean,default:!1}},He={...B,onChange:{type:Function},onSave:{type:Function},onUploadImg:{type:Function},pageFullscreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},toolbars:{type:Array,default:d.allToolbar},toolbarsExclude:{type:Array,default:[]},noPrettier:{type:Boolean,default:!1},tabWidth:{type:Number,default:2},tableShape:{type:Array,default:()=>[6,4]},placeholder:{type:String,default:""},defToolbars:{type:[String,Object]},onError:{type:Function},footers:{type:Array,default:d.allFooter},scrollAuto:{type:Boolean,default:!0},defFooters:{type:[String,Object]},noUploadImg:{type:Boolean},autoFocus:{type:Boolean},disabled:{type:Boolean},readOnly:{type:Boolean},maxLength:{type:Number},autoDetectCode:{type:Boolean},onBlur:{type:Function},onFocus:{type:Function},completions:{type:Array}},G=["onHtmlChanged","onGetCatalog"],Me=[...G,"onChange","onSave","onUploadImg","onError","update:modelValue","onBlur","onFocus"],Fe=s.defineComponent({name:"MdPreview",props:B,emits:G,setup(e,o){const{editorId:i,noKatex:n,noMermaid:t,noHighlight:l}=e;return V(e),U(e),s.onBeforeUnmount(()=>{y.bus.clear(i)}),()=>s.createVNode("div",{id:i,class:[d.prefix,e.class,e.theme==="dark"&&`${d.prefix}-dark`,`${d.prefix}-previewOnly`],style:e.style},[s.createVNode(j,{modelValue:e.modelValue,onHtmlChanged:a=>{e.onHtmlChanged?e.onHtmlChanged(a):o.emit("onHtmlChanged",a)},onGetCatalog:a=>{e.onGetCatalog?e.onGetCatalog(a):o.emit("onGetCatalog",a)},mdHeadingId:e.mdHeadingId,noMermaid:t,sanitize:e.sanitize,noKatex:n,formatCopiedText:e.formatCopiedText,noHighlight:l,previewOnly:!0},null)])}}),I=Fe;I.install=e=>(e.component(I.name,I),e);exports.CHANGE_CATALOG_VISIBLE=T;exports.CHANGE_FULL_SCREEN=L;exports.ContentPreview=j;exports.MdPreview=I;exports.ON_SAVE=P;exports.TEXTAREA_FOCUS=N;exports.editorEmits=Me;exports.editorProps=He;exports.useCatalog=Pe;exports.useConfig=Ie;exports.useExpansion=Ee;exports.useExpose=Te;exports.useOnSave=xe;exports.useProvide=Se;
