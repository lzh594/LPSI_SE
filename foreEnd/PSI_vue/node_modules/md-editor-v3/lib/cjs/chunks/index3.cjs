"use strict";const t=require("vue"),n=require("./config.cjs"),h=require("./vue-tsx.cjs"),g=require("./dom.cjs"),j={title:{type:String,default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:"auto"},onClose:{type:Function,default:()=>{}},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:()=>{}},class:{type:String}},v=t.defineComponent({props:j,setup(e,a){const c=t.ref(e.visible),i=t.ref([`${n.prefix}-modal`]),d=t.ref(),m=t.ref();let r=()=>{};const o=t.reactive({initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),y=t.computed(()=>e.isFullscreen?{width:"100%",height:"100%"}:{width:e.width,height:e.height});return t.onMounted(()=>{r=g.keyMove(m.value,(s,l)=>{o.initPos.left=s+"px",o.initPos.top=l+"px"})}),t.onBeforeUnmount(()=>{r()}),t.watch(()=>e.isFullscreen,s=>{s?r():r=g.keyMove(m.value,(l,u)=>{o.initPos.left=l+"px",o.initPos.top=u+"px"})}),t.watch(()=>e.visible,s=>{s?(i.value.push("zoom-in"),c.value=s,t.nextTick(()=>{const l=d.value.offsetWidth/2,u=d.value.offsetHeight/2,C=document.documentElement.clientWidth/2,x=document.documentElement.clientHeight/2;o.initPos.left=C-l+"px",o.initPos.top=x-u+"px"}),setTimeout(()=>{i.value=i.value.filter(l=>l!=="zoom-in")},140)):(i.value.push("zoom-out"),setTimeout(()=>{i.value=i.value.filter(l=>l!=="zoom-out"),c.value=s},130))}),()=>{const s=h.getSlot({ctx:a}),l=h.getSlot({props:e,ctx:a},"title");return t.createVNode("div",{class:[e.class],style:{display:c.value?"block":"none"}},[t.createVNode("div",{class:`${n.prefix}-modal-mask`,onClick:e.onClose},null),t.createVNode("div",{class:i.value,style:{...o.initPos,...y.value},ref:d},[t.createVNode("div",{class:`${n.prefix}-modal-header`,ref:m},[l||""]),t.createVNode("div",{class:`${n.prefix}-modal-body`},[s]),t.createVNode("div",{class:`${n.prefix}-modal-func`},[e.showAdjust&&t.createVNode("div",{class:`${n.prefix}-modal-adjust`,onClick:u=>{u.stopPropagation(),e.isFullscreen?o.initPos=o.historyPos:(o.historyPos=o.initPos,o.initPos={left:"0",top:"0"}),e.onAdjust(!e.isFullscreen)}},[t.createVNode("svg",{class:`${n.prefix}-icon`,"aria-hidden":"true"},[t.createVNode("use",{"xlink:href":`#md-editor-icon-${e.isFullscreen?"suoxiao":"fangda"}`},null)])]),t.createVNode("div",{class:`${n.prefix}-modal-close`,onClick:u=>{u.stopPropagation(),e.onClose&&e.onClose()}},[t.createVNode("svg",{class:`${n.prefix}-icon`,"aria-hidden":"true"},[t.createVNode("use",{"xlink:href":"#md-editor-icon-close"},null)])])])])])}}});function F(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!t.isVNode(e)}const b={title:{type:String,default:""},modalTitle:{type:String,default:""},visible:{type:Boolean},width:{type:String,default:"auto"},height:{type:String,default:"auto"},trigger:{type:[String,Object]},onClick:{type:Function},onClose:{type:Function},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function}},f=t.defineComponent({name:"ModalToolbar",props:b,emits:["onClick","onClose","onAdjust"],setup(e,a){return()=>{const c=h.getSlot({props:e,ctx:a},"trigger"),i=h.getSlot({props:e,ctx:a},"default");return t.createVNode(t.Fragment,null,[t.createVNode("div",{class:`${n.prefix}-toolbar-item`,title:e.title,onClick:()=>{e.onClick instanceof Function?e.onClick():a.emit("onClick")}},[c]),t.createVNode(v,{width:e.width,height:e.height,title:e.modalTitle,visible:e.visible,onClose:()=>{e.onClose instanceof Function?e.onClose():a.emit("onClose")},showAdjust:e.showAdjust,isFullscreen:e.isFullscreen,onAdjust:d=>{e.onAdjust instanceof Function?e.onAdjust(d):a.emit("onAdjust",d)}},F(i)?i:{default:()=>[i]})])}}});f.install=e=>(e.component(f.name,f),e);exports.Modal=v;exports.ModalToolbar=f;
